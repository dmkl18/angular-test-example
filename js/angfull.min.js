!function(){"use strict";function e(){return{restrict:"AE",replace:!0,templateUrl:"templates/article.html",scope:{dlcArticle:"=",articleLength:"@"},link:function(e,r,t){var a=100;+e.articleLength||(e.articleLength=a)}}}angular.module("myApp").directive("dlcArticle",e)}(),function(){"use strict";function e(){return{restrict:"A",scope:{dlcFixedBlockOnClick:"@"},link:function(e,r,t){function a(e){s.style.display="none"===s.style.display?"block":"none"}var s=document.getElementById(e.dlcFixedBlockOnClick);s&&(s.style.display="none",r.on("click",a))}}}angular.module("myApp").directive("dlcFixedBlockOnClick",e)}(),function(){"use strict";function e(){var e={base:"bg-primary",success:"bg-success",error:"bg-danger"},r={main:"dlc-gl-msg-one",showMessage:"show-message",btnClasses:"btn btn-xs btn-danger"},t=5e3;return{restrict:"EA",template:'<div><p ng-bind="message"></p></div><div><button type="button" class="'+r.btnClasses+'">x</button></div>',scope:{message:"=",type:"=",showTime:"@"},link:function(a,s,n){function i(){s.addClass(r.showMessage).addClass(e[a.type]?e[a.type]:e.base),l=setTimeout(function(){o(),a.$apply()},a.showTime?+a.showTime:t)}function o(){a.message="",a.type&&(a.type="base"),s.removeClass(g)}function c(){l&&clearTimeout(l),o(),a.$apply()}s.addClass(r.main);var l,u=s.find("button"),g=e.base+" "+e.success+" "+e.error+" "+r.showMessage;u.on("click",c),a.$watch("message",function(e,r){""!==e&&(l&&(clearTimeout(l),s.removeClass(g)),i())})}}}angular.module("myApp").directive("dlcGlobalMessageOne",e)}(),function(){"use strict";function e(){var e={base:"base",success:"success",error:"error"},r=2097152,t="image";return{restrict:"EA",replace:!0,templateUrl:"templates/image-preview.html",scope:{imageValue:"=",message:"=",number:"@",maxFileSize:"@",propertyName:"@",clearImage:"="},link:function(a,s,n){function i(){y.eq(1).css("display","none"),y.eq(2).css("display","none"),o(b),y.eq(0).on("drop",function(e){g(e,!0),a.$apply()}),y.eq(0).on("dragover",function(e){u(e)}),y.eq(0).on("dragenter",function(e){u(e)}),y.eq(1).find("button").on("click",function(e){h(),a.$apply()})}function o(e){e.on("change",function(e){g(e),a.$apply()})}function c(e,r){e&&(h(),a.clearImage=!1)}function l(){var e=b.attr("id"),r=b.attr("name");b.off("change"),b.remove(),y.eq(0).append('<input type="file" id="'+e+'" name="'+r+'" />'),b=y.eq(0).find("input"),o(b)}function u(e){e.stopPropagation(),e.preventDefault()}function g(r,t){t&&u(r);var s=t?r.originalEvent?r.originalEvent.dataTransfer.files:r.dataTransfer.files:r.target.files;if(s.length>1&&(a.message.message="It can be added only one image",a.message.type=e.base),v=s[0],!v)return void d("You must add image");if(v.size>A)return void d("The size of file is too large");if("image/png"!=v.type&&"image/jpg"!=v.type&&"image/jpeg"!=v.type&&"image/gif"!=v.type)return void d("Image must have type JPG, PNG or GIF");var n=new FileReader;n.readAsDataURL(v),n.onload=m,n.onloadstart=p,n.onprogress=f}function d(r){a.message.message=r,a.message.type=e.error,l()}function p(){y.eq(0).css("display","none"),y.eq(2).css("display","block")}function f(e){var r=e.loaded/e.total*100;$.text(Math.round(r)+" %"),w.css("width",r+"%")}function m(e){var r=y.eq(1),t=new Image;t.src=e.target.result,t.setAttribute("alt",v.name),t.onload=function(){y.eq(0).css("display","none"),y.eq(2).css("display","none"),r.css("display","block"),r.append(t),a.imageValue[a.propertyName]=t.src,a.$apply()},a.$apply()}function h(){y.eq(0).css("display","block"),y.eq(1).css("display","none"),y.eq(1).find("img").remove(),l(),delete a.imageValue[a.propertyName]}a.number||(a.number="0"),a.propertyName||(a.propertyName=t),a.$watch("clearImage",c);var v,y=s.children(),b=y.eq(0).find("input"),A=a.maxFileSize?+a.maxFileSize:r,w=y.eq(2).find("div").eq(1),$=y.eq(2).find("span").eq(0);i()}}}angular.module("myApp").directive("dlcImagePreview",e)}(),function(){"use strict";function e(){return{restrict:"EA",replace:!0,templateUrl:"templates/log-info.html",scope:{isLoggedIn:"=",userName:"=",classInfo:"@",logout:"&"},link:function(e,r,t){e.classInfo||(e.classInfo="")}}}angular.module("myApp").directive("dlcLogInfo",e)}(),function(){"use strict";function e(){return{restrict:"AE",replace:!0,transclude:!0,templateUrl:"templates/modal.html",scope:{isShown:"=show",header:"@modalTitle",close:"&",notNeedToCloseByEvent:"@"},link:function(e,r,t){function a(e,r){e?document.addEventListener("keyup",s,!1):document.removeEventListener("keyup",s,!1)}function s(r){27===+r.which&&(e.close(),e.$apply())}"true"!==e.notNeedToCloseByEvent&&e.$watch("isShown",a)}}}angular.module("myApp").directive("dlcModal",e)}(),function(){"use strict";function e(e){return{restrict:"EA",replace:!0,templateUrl:"templates/pagination.html",scope:{pages:"=dlcPagination",page:"=",btnBlockClass:"@",btnClass:"@",firstLastPagsStartOn:"@",baseHref:"@",firstGood:"@"},link:function(r,t,a){function s(){var e,s,c,l=t.children().eq(r.pages<r.firstLastPagsStartOn?0:1),u="";if(o){var g=t.children();g.each(function(){var e=this.innerHTML;"..."!==e&&isNaN(+e)||angular.element(this).remove()})}if(r.pages<=i||"true"===a.alwaysFull)for(e=0,s=r.pages;s>e;e++)u+=n(e);else{for(e=0,s=2;s>e;e++)u+=n(e);if(2===r.page&&(u+=n(2)),(r.page<3||r.page>4)&&(u+='<span class="fromto">...</span>'),r.page>2&&r.page<=r.pages-2){for(c=3===r.page?2:r.page-2,e=c,s=r.page+1;s>e;e++)u+=n(e);r.pages-2-r.page>1&&(u+='<span class="fromto">...</span>')}for(c=r.page===r.pages-2?r.pages-1:r.page===r.pages-1?r.pages-3:r.pages-2,e=c;e<r.pages;e++)u+=n(e)}l.after(u),o=!0}function n(e){var t;return t=e!==r.page-1?'<a href="'+r.baseHref+(e+1)+'" class="'+r.btnClass+'">'+(e+1)+"</a>":'<button class="'+r.btnClass+' active" disabled>'+(e+1)+"</button>"}var i=8,o=!1;r.btnBlockClass||(r.btnBlockClass="btn-group"),r.btnClass||(r.btnClass="btn btn-default"),r.firstLastPagsStartOn||(r.firstLastPagsStartOn=6),r.baseHref||(r.baseHref=e.path()),r.baseHref=-1===r.baseHref.indexOf("page")?"/"===r.baseHref[r.baseHref.length-1]?r.baseHref+"page/":r.baseHref+"/page/":r.baseHref.substring(0,r.baseHref.indexOf("page"))+"page/",r.$watch("pages",function(e,t){"true"===r.firstGood?(setTimeout(s,0),r.firstGood=!1):e>1&&t!==e&&setTimeout(s,0)})}}}angular.module("myApp").directive("dlcPagination",e),e.$inject=["$location"]}(),function(){"use strict";function e(){var e={successForm:"has-success",errorForm:"has-error",success:"alert alert-success",error:"alert alert-danger"};return{restrict:"A",require:"form",scope:{clearForm:"="},link:function(r,t,a,s){function n(e,t){e&&(i(),r.clearForm=!1)}function i(){var r=t.find("."+e.successForm),a=t.find("."+e.errorForm),n=t.find("."+o);r.length&&r.removeClass(e.successForm),a.length&&a.removeClass(e.errorForm),n.length&&n.css("display","none"),s.$setPristine(),s.$setUntouched()}var o=a.errBlockClass;r.$watch("clearForm",n)}}}angular.module("myApp").directive("reactiveForm",e)}(),function(){"use strict";function e(){var e={success:"has-success",error:"has-error"};return{restrict:"A",require:"^form",scope:{param:"@touchedFieldView"},link:function(r,t,a,s){function n(a){var n;s[r.param].$invalid&&s[r.param].$touched?(t.addClass(e.error),n=angular.element(document.querySelector("form[name="+s.$name+"] [touched-field-view="+r.param+"] ."+c)),n.length&&n.css("display","block")):t.hasClass(e.error)&&(t.removeClass(e.error),n=angular.element(document.querySelector("form[name="+s.$name+"] [touched-field-view="+r.param+"] ."+c)),n.length&&n.css("display","none")),s[r.param].$valid&&s[r.param].$touched&&t.addClass(e.success)}var i=angular.element(document.querySelector("form[name="+s.$name+"] [name="+r.param+"]")),o=a.checkAjaxView,c=a.errBlockClass;i.length&&(i.on("blur",n),"true"===o&&i.on("checkTouchedFieldView",n))}}}angular.module("myApp").directive("touchedFieldView",e)}(),function(){"use strict";function e(){this.createGroupsFromArray=function(e,r){if(e){for(var t=[],a=[],s=0,n=0;n<e.length;n++)n%r===0&&0!==n&&(t[s]=angular.copy(a),s++,a=[]),a.push(e[n]);return t[s]=angular.copy(a),t}}}angular.module("myApp").service("arrayHelperService",e)}(),function(){"use strict";function e(e,r,t,a,s){function n(){d=new Firebase(g).orderByChild("datetime")}function i(){var e=t(d);return e.$loaded()}function o(e,r){var t=e*r,a={page:e,pages:Math.ceil(p.length/r),isCorrectData:!1,data:[]};if(0===p.length&&1===e)return a.isCorrectData=!0,a;if(1>e||t-r>=p.length)return a;var s=p.length-t,n=s+r;return 0>s&&(s=0),a.isCorrectData=!0,a.data=[].slice.call(p,s,n).reverse(),a}function c(r,t){var s=e.defer();return f?a(function(){var e=o(r,t);e.isCorrectData?s.resolve(e):s.reject({message:"There is no such page"})},0):i().then(function(e){p=e;var a=o(r,t);a.isCorrectData?s.resolve(a):s.reject({message:"There is no such page"}),f=!0},function(e){s.reject(e)}),s.promise}function l(t){var s=e.defer();return f?a(function(){var e=p.$getRecord(t);null!=e?s.resolve(e):s.reject({message:"There is no such article"})},0):r(new Firebase(g+"/"+t)).$loaded().then(function(e){null===e.$value?s.reject({message:"There is no such article"}):s.resolve(e)},function(e){s.reject(e)}),s.promise}function u(e){return f?p.$add(e):t(d).$add(e)}var g=s+"/articles",d=null,p={},f=!1;return n(),{getArticle:l,getArticlesByPage:c,addArticle:u}}angular.module("myApp").factory("articlesFirebaseService",e),e.$inject=["$q","$firebaseObject","$firebaseArray","$timeout","FIREBASE_PATH"]}(),function(){"use strict";function e(e,r,t){var a="user";this.checkIfUserLoggedIn=function(){var e=this.getCurrentUserInfo();return e&&1e3*e.expires<Date.now()&&(e=null,localStorage.removeItem(a)),e?!0:!1},this.login=function(s){var n=e.defer(),i=r(new Firebase(t));return i.$authWithPassword({email:s.email,password:s.password}).then(function(e){e.email=e.password.email,localStorage.setItem(a,JSON.stringify(e)),n.resolve(e)},function(e){n.reject({message:e})}),n.promise},this.getCurrentUserInfo=function(){return JSON.parse(localStorage.getItem(a))},this.logout=function(){localStorage.removeItem(a);var e=r(new Firebase(t));e.$unauth()}}angular.module("myApp").service("userService",e),e.$inject=["$q","$firebaseAuth","FIREBASE_PATH"]}(),function(){"use strict";function e(){var e=100,r=[" ",",",".","?","!",":",";"];return function(t,a){var s,n=a?a:e,i=!1;if(!angular.isString(t))return t;if(t.length>n){for(s=n;-1===r.indexOf(t[s]);){if(s>=t.length){i=!0;break}s++}i||(t=t.substr(0,s)+"...")}return t}}angular.module("myApp").filter("beginStringFilter",e)}(),function(){"use strict";function e(){return function(e){var r,t=+e;return t?(t=new Date(t),r=t.getMinutes(),10>r&&(r="0"+r),e=t.getDate()+"."+(t.getMonth()+1)+"."+t.getFullYear()+" "+t.getHours()+":"+r):e}}angular.module("myApp").filter("dlcDateFilter",e)}(),function(){"use strict";function e(e,r){function t(){e.user=r.getCurrentUserInfo()}e.user={},t()}angular.module("myApp").controller("AdminMainController",e),e.$inject=["$scope","userService"]}(),function(){"use strict";function e(e,r,t){function a(){var e=r.article;s(e)}function s(e){var r=t.getArticle(e);r.then(n,i)}function n(r){e.articlePrepare.showLoading=!1,e.articlePrepare.isResult=!0,e.article=r}function i(r){e.articlePrepare.showLoading=!1,e.articlePrepare.isMistake=!0,console.error(r.message)}function o(){e.imageArticleView.isShown=!0}function c(){e.imageArticleView.isShown=!1}e.articlePrepare={showLoading:!0,isResult:!1,isMistake:!1,mistakeMessage:"There is no such article"},e.article={},e.imageArticleView={isShown:!1,show:o,close:c},a()}angular.module("myApp").controller("ArticleController",e),e.$inject=["$scope","$routeParams","articlesFirebaseService"]}(),function(){"use strict";function e(e,r,t){function a(){"undefined"==typeof FileReader&&(e.formPrepare.withImage=!1,console.log(e.formPrepare.withImage))}function s(r){if(r.$valid){e.actionInfo.isAddingProcess=!0,e.articleToAdd.datetime=Date.now();var a=t.addArticle(e.articleToAdd);a.then(n,i)}}function n(t){e.actionInfo.isAddingProcess=!1,e.dlcGlobalMessage.message=e.actionInfo.successAddingMessage,e.dlcGlobalMessage.type="success",o(),r.path("articles/"+t.key())}function i(r){e.actionInfo.isAddingProcess=!1,e.dlcGlobalMessage.message=e.actionInfo.errorAddingMessage,e.dlcGlobalMessage.type="error",console.error(r)}function o(){e.articleToAdd={},e.formPrepare.clearForm=!0}function c(){e.addArticleProccess.isShown=!1}function l(){e.addArticleProccess.isShown=!0}e.formPrepare={withImage:!0,clearForm:!1},e.articleToAdd={},e.actionInfo={isAddingProcess:!1,successAddingMessage:"You successfully added article",errorAddingMessage:"An error occurred"},e.addArticleProccess={isShown:!1,show:l,close:c},e.addArticle=s,e.clearArticleForm=o,a()}angular.module("myApp").controller("ArticlesActionController",e),e.$inject=["$scope","$location","articlesFirebaseService"]}(),function(){"use strict";function e(e,r,t,a){function s(){var t=+r.page;if(!t||0>=t){if(void 0!==r.page)return e.articlesPrepare.showLoading=!1,e.articlesPrepare.isMistake=!0,void(e.articlesPrepare.mistakeMessage="You must enter a correct number of page");t=1}n(t),e.articles.page=t}function n(e){var r=t.getArticlesByPage(e,c);r.then(i,o)}function i(r){e.articlesPrepare.showLoading=!1,0===r.data.length?e.articlesPrepare.isEmpty=!0:(e.articlesPrepare.isResult=!0,e.articles.values=a.createGroupsFromArray(r.data,l),e.articles.page=r.page,e.articles.pages=r.pages)}function o(r){e.articlesPrepare.showLoading=!1,e.articlesPrepare.isMistake=!0,e.articlesPrepare.mistakeMessage=r.message,console.error(r.message)}var c=6,l=2;e.articlesPrepare={showLoading:!0,isResult:!1,isMistake:!1,isEmpty:!1,mistakeMessage:"",emptyMessage:"There is no articles now, but you can visit our site later",baseDescriptionLength:150},e.articles={values:[],page:0,pages:0},s()}angular.module("myApp").controller("ArticlesController",e),e.$inject=["$scope","$routeParams","articlesFirebaseService","arrayHelperService"]}(),function(){"use strict";function e(e,r,t,a){function s(){a.checkIfUserLoggedIn()&&u()}function n(r){if(r.$valid){e.userActions.isLoginProccess=!0;var t=a.login(e.user);t.then(i,o)}}function i(a){e.userActions.isLoginProccess=!1,e.dlcGlobalMessage.message="You have successfully logged in",e.dlcGlobalMessage.type="success",t.$broadcast(g),r.path("/")}function o(r){e.userActions.isLoginProccess=!1,e.dlcGlobalMessage.message="You set wrong email or password",e.dlcGlobalMessage.type="error",console.error(r)}function c(){e.user={},e.formPrepare.clearForm=!0}function l(){a.logout(),e.userInfo.isUserLoggedIn=!1,e.userInfo.user={},e.dlcGlobalMessage.message="You have logged out",e.dlcGlobalMessage.type="base",r.path("/")}function u(){e.userInfo.isUserLoggedIn=!0,e.userInfo.user=a.getCurrentUserInfo()}var g="logInSuccess";e.formPrepare={clearForm:!1},e.userActions={isLoginProccess:!1},e.userInfo={isUserLoggedIn:!1,user:{}},e.user={},e.login=n,e.clearLoginForm=c,e.logout=l,e.$on(g,u),s()}angular.module("myApp").controller("LoginController",e),e.$inject=["$scope","$location","$rootScope","userService"]}();